{"version":3,"sources":["../src/cb-promise.js"],"names":["fs","require","util","readFileAsync","path","Promise","resolve","reject","readFile","err","data","then","console","log","promisify","JSON","parse","version"],"mappings":";;AAAA,IAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB,C,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASE,aAAT,CAAuBC,IAAvB,EAA6B;AACzB,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCP,IAAAA,EAAE,CAACQ,QAAH,CAAYJ,IAAZ,EAAkB,OAAlB,EAA2B,UAACK,GAAD,EAAMC,IAAN,EAAe;AACtC,UAAID,GAAJ,EAAS,OAAOF,MAAM,CAACE,GAAD,CAAb;AACTH,MAAAA,OAAO,CAACI,IAAD,CAAP;AACH,KAHD;AAIH,GALM,CAAP;AAMH,C,CACD;;;AACAP,aAAa,CAAC,iBAAD,CAAb,CAAiCQ,IAAjC,CAAsC,UAAAD,IAAI,EAAI;AAC1CE,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ,EAAkB,KAAlB;AACH,CAFD,WAES,UAAAD,GAAG,EAAI;AACZG,EAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AACH,CAJD,E,CAMA;;AACAP,IAAI,CAACY,SAAL,CAAed,EAAE,CAACQ,QAAlB,EAA4B,iBAA5B,EACKG,IADL,CACUI,IAAI,CAACC,KADf,EAEKL,IAFL,CAEU,UAAAD,IAAI,EAAI;AACVE,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACO,OAAjB,EADU,CACiB;AAC9B,CAJL,WAKW,UAAAR,GAAG,EAAI;AACVG,EAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AACH,CAPL","sourcesContent":["const fs = require('fs');\nconst util = require('util');\n// fs.readFile('../package.json', 'utf-8', (err, data) => {\n//     if (err) return console.log(err);\n//     // 需要注意，这里的data是字符串\n//     console.log(typeof data); // string\n//     const res = JSON.parse(data);\n//     console.log(res.name); // Koa2-study\n// });\n// 使用Promise封装\nfunction readFileAsync(path) {\n    return new Promise((resolve, reject) => {\n        fs.readFile(path, 'utf-8', (err, data) => {\n            if (err) return reject(err);\n            resolve(data);\n        });\n    });\n}\n// Promise推荐使用catch捕获错误\nreadFileAsync('../package.json').then(data => {\n    console.log(data, '---');\n}).catch(err => {\n    console.log(err);\n});\n\n// 推荐使用util.promisify 完成从回调向Promise迁移\nutil.promisify(fs.readFile)('../package.json')\n    .then(JSON.parse)\n    .then(data => {\n        console.log(data.version); // 1.0.0\n    })\n    .catch(err => {\n        console.log(err);\n    });"],"file":"cb-promise.js"}