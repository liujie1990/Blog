## 索引
### 索引的种类与使用

1. _id索引
    1. _id索引是绝大多数集合默认建立的索引
    2. 对于每个插入的数据，MongoDB都会自动生成一条唯一的_id字段。
2. 单键索引
    1. 单键索引是最普通的索引
    2. 例如：一条记录形式为：{x:1,y:2,z:3}。以x:1建立索引，这样就可以以键x来进行查询。
    3. 与_id索引不同，单键索引不会自动创建
3. 多键索引
    1. 多键索引与单键索引创建形式相同，区别在于字段的值。
    2. 单键索引：值为一个单一的值，例如：字符串，数字或者日期。
    3. 多键索引：值具有多个记录，例如数组。
4. 复合索引
    1. 当我们的查询条件不只有一个时，就需要建立复合索引
    2. 插入{x:1,y:2,z:3}记录->按照x与y的值查询->创建索引：db.col_name.createIndex({x:1,y:1})->使用{x:1,y:1}作为条件进行查询。
5. 过期索引
    1. 过期索引：是在一段时间后会过期的索引
    2. 在索引过期后，相应的数据会被删除
    3. 这适合存储一些在一段时间之后会失效的数据，比如用户的登录信息、存储的日志。
6. 全文索引
7. 地理位置索引

```js
// 使用createIndex来创建索引
> db.test_col.createIndex({x:1})
{
	"createdCollectionAutomatically" : false,
	"numIndexesBefore" : 1,
	"numIndexesAfter" : 2,
	"ok" : 1
}
```
```js
// 创建之后查询索引
> db.test_col.getIndexes()
[
	{
		"v" : 2,
		"key" : {
			"_id" : 1
		},
		"name" : "_id_",
		"ns" : "test.test_col"
	},
	{
		"v" : 2,
		"key" : {
			"x" : 1
		},
		"name" : "x_1",
		"ns" : "test.test_col"
	}
]
```
##### 9.2 过期索引的限制

1. 存储在过期索引字段的值必须是指定的时间类型；(说明：必须是ISODate数组，不能使用时间戳，否则不能被自动删除)
2. 如果指定了ISODate数组，则按照最小的时间进行删除
3. 过期索引不能是复合索引
4. 删除时间不是精确的。(说明：删除过程是由后台程序每60s跑一次，而且删除也需要一些时间，所以存在误差)

##### 9.3 全文索引
全文索引：对字符串与字符串数组创建全文可搜索的索引。

##### 9.4 索引的匹配规则
##### 9.5 如何建立合适的索引