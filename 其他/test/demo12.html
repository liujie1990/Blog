<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <style type="text/css">
        #anim{
            width: 200px;
            height: 200px;
            background-color: red;
            position: absolute;
        }
    </style>
</head>
<body>
<div id="anim">点击运行动画</div>
<script type="text/javascript">
//这里是兼容requestAnimationFrame
window.requestAnimFrame = (function(){
      return  window.requestAnimationFrame       ||
              window.webkitRequestAnimationFrame ||
              window.mozRequestAnimationFrame    ||
              window.oRequestAnimationFrame      ||
              window.msRequestAnimationFrame     ||
              function( callback ){
                window.setTimeout(callback, 1000 / 60);
              };
})();
var elem = document.getElementById("anim");
var startTime = undefined; //全局的
function render(time){ //time是局部的
  if(time === undefined) {
    time = Date.now(); //获取到当前时间的毫秒数
  }
  if(startTime === undefined) {
      //第一次调用的时候startTime是undefined，之后就不是了
      //而time每次调用都等于当前时间的毫秒数
      startTime = time;
  }
  //当是500的整数倍的时候，left值从0开始
  elem.style.left = ((time - startTime)/10 % 500) + "px";
}
elem.onclick = function() {
    (function animloop() {
      render();
      //这里利用requestAnimFrame方法来控制渲染的帧数
      requestAnimFrame(animloop);
    })();
};
</script>
</body>
</html>