(function(t){function e(e){for(var o,i,s=e[0],l=e[1],c=e[2],p=0,d=[];p<s.length;p++)i=s[p],r[i]&&d.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},r={app:0},a=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2e9f":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var o=n("2b0e"),r=n("ce5b"),a=n.n(r),i=n("bc3a"),s=n.n(i),l=n("7869"),c=n.n(l),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},p=[],d=n("2877"),f={},v=Object(d["a"])(f,u,p,!1,null,null,null);v.options.__file="App.vue";var m=v.exports,g=n("8c4f"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"inspire"}},[n("v-navigation-drawer",{attrs:{clipped:t.$vuetify.breakpoint.lgAndUp,fixed:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",{attrs:{dense:""}},[t._l(t.items,function(e){return[n("v-list-tile",{key:e.text,on:{click:function(n){t.switchType(e.type)}}},[n("v-list-tile-action",[n("v-icon",[t._v(t._s(e.icon))])],1),n("v-list-tile-content",[n("v-list-tile-title",[t._v("\n                            "+t._s(e.text)+"\n                        ")])],1)],1)]})],2)],1),n("v-toolbar",{attrs:{"clipped-left":t.$vuetify.breakpoint.lgAndUp,color:"blue darken-3",dark:"",app:"",fixed:""}},[n("v-toolbar-title",{staticClass:"ml-0 pl-3"},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),n("span",{staticClass:"hidden-sm-and-down"},[t._v("JWT-DEMO")])],1),n("v-spacer"),n("v-btn",{attrs:{icon:"",large:""}},[n("v-avatar",{attrs:{size:"32px",tile:""}},[n("img",{attrs:{src:"https://cdn.vuetifyjs.com/images/logos/logo.svg",alt:"Vuetify"}})])],1)],1),n("v-content",[n("v-container",{attrs:{fluid:"","fill-height":""}},[n("v-layout",{attrs:{"justify-center":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-card",{attrs:{hover:""}},[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("h3",{staticClass:"headline mb-0"},[t._v(t._s(t.content.title))])])]),n("v-card-text",[n("div",{staticClass:"text",domProps:{innerHTML:t._s(t.content.text)}})])],1)],1)],1)],1)],1)],1)},b=[],x={data:function(){return{drawer:null,content:{title:"",text:""},items:[{icon:"mdi-contacts",text:"获取用户信息",type:1},{icon:"mdi-history",text:"查看token",type:2},{icon:"mdi-delete",text:"删除token并请求",type:3},{icon:"mdi-logout",text:"退出/重新登录",type:4}]}},created:function(){this.getUser()},methods:{switchType:function(t){switch(t){case 1:this.getUser();break;case 2:this.getToken();break;case 3:this.delToken();break;case 4:this.logout();break}},getUser:function(){var t=this;this.$axios.get("/api/info").then(function(e){t.content={title:"用户信息",text:"\n                        <p>描述：请求头中带着 token 发起请求，获取用户信息</p>\n                        <p>请求接口：'/api/info'</p>\n                        <p>请求结果：".concat(JSON.stringify(e),"</p>\n                    ")}})},getToken:function(){var t=localStorage.getItem("token"),e=localStorage.getItem("token_exp"),n=(new Date).getTime();console.log(n-e),this.content={title:"token",text:"\n                    <p>当前的 token 为：".concat(t,"</p>\n                    <p>token过期时间还剩：").concat(72e5-(n-e)," ms</p>\n                ")}},delToken:function(){var t=this;localStorage.removeItem("token"),localStorage.removeItem("token_exp"),this.$axios.get("/api/info").then(function(e){t.content={title:"用户信息",text:"\n                        <p>描述：请求头中带着 token 发起请求，获取用户信息</p>\n                        <p>请求接口：'/api/info'</p>\n                        <p>请求结果：".concat(JSON.stringify(e),"</p>\n                    ")}}).catch(function(e){t.$toast("登录状态已失效，请重新登录"),t.content={title:"无token请求",text:"\n                        <p>描述：请求头中没有 token 发起请求</p>\n                        <p>请求接口：'/api/info'</p>\n                        <p>请求结果：".concat(JSON.stringify(e.response),"</p>\n                    ")},setTimeout(function(){t.$router.push("/login")},2500)})},logout:function(){localStorage.removeItem("token"),localStorage.removeItem("token_exp"),this.$router.push("/login")}}},k=x,y=(n("fee6"),Object(d["a"])(k,h,b,!1,null,"a982ae9e",null));y.options.__file="Home.vue";var w=y.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"inspire"}},[n("v-content",[n("v-container",{attrs:{fluid:"","fill-height":""}},[n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-toolbar-title",[t._v("登录")])],1),n("v-card-text",[n("v-form",[n("v-text-field",{attrs:{"prepend-icon":"mdi-account",label:"Username",type:"text"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("v-text-field",{attrs:{"prepend-icon":"mdi-lock",label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),n("v-card-actions",[t._v("\n                            还没账号？前往"),n("router-link",{attrs:{to:"/reg"}},[t._v("注册")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)],1)],1)],1)],1)},$=[],j={data:function(){return{username:"",password:""}},methods:{login:function(){var t=this;if(""===this.username||""===this.password)return this.$toast("请输入正确的用户名和密码");this.$axios.post("/api/login",{name:this.username,password:this.password}).then(function(e){"000001"===e.code?(localStorage.setItem("token",e.data),localStorage.setItem("token_exp",(new Date).getTime()),t.$router.push("/")):t.$toast(e.msg)})}}},S=j,O=Object(d["a"])(S,_,$,!1,null,null,null);O.options.__file="Login.vue";var T=O.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"inspire"}},[n("v-content",[n("v-container",{attrs:{fluid:"","fill-height":""}},[n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-toolbar-title",[t._v("注册")])],1),n("v-card-text",[n("v-form",[n("v-text-field",{attrs:{"prepend-icon":"mdi-account",label:"Username",type:"text"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("v-text-field",{attrs:{"prepend-icon":"mdi-email",label:"Email",type:"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("v-text-field",{attrs:{"prepend-icon":"mdi-lock",label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),n("v-card-actions",[t._v("\n                            已有账号？前往"),n("router-link",{attrs:{to:"/login"}},[t._v("登录")]),n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:t.register}},[t._v("注册")])],1)],1)],1)],1)],1)],1)],1)},I=[],P={data:function(){return{username:"",email:"",password:""}},methods:{register:function(){var t=this;if(""===this.username||""===this.password)return this.$toast("请输入正确的用户名和密码");this.$axios.post("/api/register",{name:this.username,email:this.email,password:this.password}).then(function(e){"000001"===e.code?(t.$toast("注册成功，请登录！"),t.$router.push("/login")):t.$toast(e.msg)})}}},E=P,C=Object(d["a"])(E,A,I,!1,null,null,null);C.options.__file="Register.vue";var U=C.exports;o["default"].use(g["a"]);var q=new g["a"]({routes:[{path:"/",name:"home",component:w,meta:{requireAuth:!0}},{path:"/login",name:"login",component:T,meta:{requireAuth:!1}},{path:"/reg",name:"register",component:U,meta:{requireAuth:!1}}]}),J=n("9483");Object(J["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("bf40"),n("5363"),n("cc20");o["default"].config.productionTip=!1,o["default"].prototype.$axios=s.a,o["default"].use(a.a,{iconfont:"mdi"}),o["default"].use(c.a,{type:"top"}),q.beforeEach(function(t,e,n){if(t.meta.requireAuth){var o=localStorage.getItem("token"),r=localStorage.getItem("token_exp"),a=(new Date).getTime();console.log(a-r),o&&a-r<=72e5?n():n("/login")}else n()}),s.a.interceptors.request.use(function(t){var e=localStorage.getItem("token");return t.headers.common["Authorization"]="Bearer "+e,t}),s.a.interceptors.response.use(function(t){return t.data},function(t){return Promise.reject(t)}),new o["default"]({router:q,render:function(t){return t(m)}}).$mount("#app")},fee6:function(t,e,n){"use strict";var o=n("2e9f"),r=n.n(o);r.a}});